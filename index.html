<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Ben Brown</title>
<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5, user-scalable=no">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.2/jquery-ui.min.js"></script>
<script src="typed.js"></script>
<script src="jquery.cookie.js"></script>
<script type="text/javascript">
	var fbLink = "https://www.facebook.com/benbenbobsoftware";
	var twitterLink = "http://www.twitter.com/benbenbobsoft";
	var liLink = "https://www.linkedin.com/profile/view?id=327054241";
	var mailLink = "mailto:benbrown52@gmail.com";
	var ghLink = "http://www.github.com/benbenbob1";
	var siteName = "benbenbob1.github.io";
	var shortName = "bbb";
	var version = 0.83;
	function setupLinks() {
		document.getElementById('fb-button').onclick = function(){window.open(fbLink);};
		document.getElementById('twitter-button').onclick = function(){window.open(twitterLink);};
		document.getElementById('in-button').onclick = function(){window.open(liLink);};
		document.getElementById('email-button').onclick = function(){window.location = mailLink;};
		document.getElementById('gh-button').onclick = function(){window.open(ghLink);};
	}
	function showSidebar() {
		$('#cmdList').show('slide', {direction: 'right'}, 500);
		$('#contactmenu_container').fadeIn(500);
		setTimeout(function(){ $(window).resize(); }, 505);
	}
	function htmlImage() {
		var out = '';
		$.ajaxSetup({async: false, timeout: 5000});
		var jqxhr = $.get( 'me.txt', function( data ) {
			out = data;
		}).fail (function() { out = 'an error occurred'; });
		return out;
	}
	function catCommand(args) {
		if (args.length < 2 || args[1] == ' ' || args[1] == '') {
			return 'usage: cat file1\n\tprints the contents of <u>file1</u>.';
		} if (args[1] == 'index.html' || args[1] == '.' || args[1] == '/' || args[1] == 'index') {
			return 'why don\'t you just view the source?';
		} else {
			var out = '';
			$.ajaxSetup({async: false, timeout: 5000});
			var jqxhr = $.get( args[1], function( data ) {
				out = data.replace(/</g, "&lt;").replace(/>/g, "&gt;");
			}).fail (function() { out = 'read failed'; });
			return out;
		}
	}
	function showResume() {
		window.open("https://www.dropbox.com/s/3i0e8vu47lj7ehk/Ben%20Brown%20-%20Resume.pdf?dl=0");
		return "Opening resume...";
	}
	function contactCommand(args) {
		var result = '';
		if (args[1] === "-f") { 
			result = 'Opening facebook...'; 
			$('#fb-button').click();
		} else if (args[1] === "-t") {
			result = 'Opening twitter...';
			$('#twitter-button').click();
		} else if (args[1] === "-r") {
			result = showResume();
		} else if (args[1] === "-l") {
			result = 'Opening LinkedIn...';
			$('#in-button').click();
		} else if (args[1] === "-g") {
			result = 'Opening GitHub...';
			$('#gh-button').click();
		} else if (args[1] === "-e") {
			result = 'Opening email client...';
			$('#email-button').click();
		} else {
			result = 'usage: contact -ftlger\n\tfind me on:\n\t\t-f Facebook\n\t\t-t Twitter\n\t\t-l LinkedIn\n\t\t-g GitHub\n\t\t-e Email\n\t-r View my resume';
		}
		return result;
	}
	function aboutCommand(args) {
		return "\n‘« About Me »’\nHello. My name is Ben Brown.\nI am a freelance mobile app developer as well\nas a web frontend and backend designer.\n\nAlso, I am really cool.\n\n";
	}
	function stuffCommand(args) {
		return "\n‘« Stuff »’\nSome things I've done:\n • Created a Bluetooth audio receiver using a Raspberry Pi, C, and a few shell scripts\n • Created a webserver and associated iPhone app to control the led light strips in my room using a custom circuit, said Raspberry Pi, C, and Objective-C\n • Wrote a program that takes the music I'm listening to and makes the lights respond to the music using C\n • Wrote this website in JavaScript :)\n";
	}
	function skillsCommand(args) {
		return "\n‘« My Skills »’\nWhat I can do:\n\tC\t\t[«          »]\n\tC++\t\t[«        »  ]\n\tObjective-C\t[«          »]\n\tSwift\t\t[«       »   ]\n\tJava\t\t[«        »  ]\n\tHTML5\t\t[«      »    ]\n\tJavaScript\t[«         » ]\n\tjQuery\t\t[«        »  ]\n\tPHP\t\t[«     »     ]\n\tPython\t\t[«       »   ]\n\nWhat I cannot do:\n\tRaise one eyebrow\n\tBake a rhubarb pie\n\tPerform an exorcism\n\n";
	}
	function skillzCommand(args) {
		return "\n‘« Ma $killz »’\nWhat I can programmerate:\n\tCizzle\t\t[«          »]\n\tCizzle++\t[«        »  ]\n\tObjectin-Cizzle\t[«          »]\n\t$wift\t\t[«       »   ]\n\tMakin a brew\t[«        »  ]\n\tHTMLFam\t\t[«      »    ]\n\tJavaScrizzle\t[«         » ]\n\tjQuerian\t[«        »  ]\n\tHIP\t\t[«     »     ]\n\tDa snake\t[«       »   ]\n\nNah:\n\tBrow liftin\n\tPie bakin\n\tExorcisin'\n\n";
	}
	function evaluate(str) {
		var elem = $(".element");
		var args = str.toString().toLowerCase().split(' ');
		var cmd = args[0];
		var result = "";
		if (cmd == "test") {
			result = "success!";	
		} else if (cmd == "echo") {
			result = '';
			for (var i=1; i<args.length; i++) {
				result = result + args[i] + " ";
			}
		} else if (cmd == "ls") {
			result = '/\tme.txt\tindex.html\ntyped.js\tjquery.cookie.js';
		} else if (cmd == "help") {
			result = "\nabout: all about me, Ben Brown!\nskills: what can I do for you?\nstuff: some things I've done\ncontact: how to find me\n\nSome commands:\n\techo\tcat\tls\nMore commands to come!";
		} else if (cmd == "hello") {
			result = "hey there!";
		} else if (cmd == "contact") {
			return contactCommand(args);
		} else if (cmd == "stuff") {
			return stuffCommand(args);
		} else if (cmd == "skills") {
			return skillsCommand(args);
		} else if (cmd == "skillz") {
			return skillzCommand(args);
		} else if (cmd == "resume") {
			return showResume();
		} else if (cmd == "cat") {
			return catCommand(args);
		} else if (cmd == "about") {
			return aboutCommand(args);
		} else if (cmd == "me") { 
			result = "\n‘"+htmlImage()+"’";
		} else {
			/*var header = "?cmd="+encodeURIComponent(str);
			result = $.ajaxSetup({async: false, timeout: 4000});
			var jqxhr = $.get( 'test.php'+header, function( data ) {
				if (!data) { result = "-bbcs: " + cmd + ": command not found"; }
				else { result = data.replace(/</g, "&lt;").replace(/>/g, "&gt;"); }
			}).fail (function() { result = 'command failed'; });*/
			result = "-"+shortName": " + cmd + ": command not found";
		}
		return result;
	}
	function mobileKeyboardHidden() {
		$('#textinput').hide();
		$('#mobile_helper').fadeIn('fast');
	}
	function mobileShowKeyboard() {
		$('#mobile_helper').fadeOut('fast');
		$('#textinput').show();
		$('#textinput').onblur = function() {mobileKeyboardHidden();};
		$('#textinput').focus();
	}
</script>
<script>
/*
	To-do: fix mobile device text resizing 

*/
$(function(){
	var device = (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));
	var android = device && (/android/i.test(navigator.userAgent.toLowerCase()));
	var hidden = "hidden";
	if (device) { // User is using a mobile device
		mobileKeyboardHidden();
	}
	try {
		// Standards:
		if (hidden in document)
			document.addEventListener("visibilitychange", onchange);
		else if ((hidden = "mozHidden") in document)
			document.addEventListener("mozvisibilitychange", onchange);
		else if ((hidden = "webkitHidden") in document)
			document.addEventListener("webkitvisibilitychange", onchange);
		else if ((hidden = "msHidden") in document)
			document.addEventListener("msvisibilitychange", onchange);
		// IE 9 and lower:
		else if ("onfocusin" in document)
			document.onfocusin = document.onfocusout = onchange;
		// All others:
		else
			window.onpageshow = window.onpagehide = window.onfocus = window.onblur = onchange;
	} catch(err) {
    	console.log("Failed trying to catch unfocus event!");
	}

	function onchange (evt) {
		var v = "visible", h = "hidden",
			evtMap = {
			  focus:v, focusin:v, pageshow:v, blur:h, focusout:h, pagehide:h
			};

		evt = evt || window.event;
		if (evt.type in evtMap)
			document.body.className = evtMap[evt.type];
		else
			document.body.className = this[hidden] ? "hidden" : "visible";
	}

	$(window).focus(function() {
        $('.typed-cursor').attr('id', '');
    });

    $(window).blur(function() {
        $('.typed-cursor').attr('id', 'unfocused');
    });
    
    $(window).resize(function() {
    	if ($('#cmdList').position().left > 100) {
	    	$('.container').css('width',  ($('#cmdList').position().left-15)+'px');
	    }
    });
    
    function scrollToBottom() {
    	if (!device) {
			window.scrollTo(0,document.body.scrollHeight);
		} else {
			var elem = $(".element");
			var tinput = $('#textinput');
			//tinput.height(elem.height());
			var newHeight = (tinput.height()*2)+"px";
			tinput.css('line-height', newHeight);
			/*var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
			if (elem.height() < h) {
				window.scrollTo(0,0);
			} else {
				window.scrollTo(0,document.body.scrollHeight);
			}*/
			
		}
    }

	// set the initial state (but only if browser supports the Page Visibility API)
	if( document[hidden] !== undefined )
	onchange({type: document[hidden] ? "blur" : "focus"});

	var beenHereBefore = $.cookie('visited');
	if (!beenHereBefore) {
		$.cookie('visited', 'true', { expires: 10 });
		$.cookie('visited', Boolean);
	}
	
	//var date = 'Last login: '+date('D M j H:i:s', time());
	//$.cookie('lastdate', date, { expires: 10 });

	var finishedTyping = false;
	var shifting = false;
	var extra = '';
	var beginning = '';
	var thePrompt = '/var/root$ ';
	var extraSize = 0;
	var command = '';
	//var timingOrExtra = beenHereBefore?('\n'+$.cookie('lastdate')):'^1000';
	var timingOrExtra = beenHereBefore?'\nWelcome back!^500':'^1000';
	//BenBrownCS.com
	var toType = siteName+', version '+version+' initialized.'+timingOrExtra+'\n\n'+thePrompt;
	var cmds = [];
	var historyCursor = -1;
	var textCursor = 0;
	var showingSocial = false;
	setupLinks();
    $(".element").typed({
        strings: [toType],
        //typeSpeed: 0,
		startDelay: beenHereBefore?0:3000,
		typeSpeed: -400,
		showCursor: true,
        cursorChar: "▋",
		contentType: 'text',
		preStringTyped: function() {
			$(".typed-cursor").css("color", "black");
			finishedTyping = false;
			},
		callback: function() {
			$(".typed-cursor").css("color", "");
			finishedTyping = true;
			beginning = $(".element").text();
			if (beenHereBefore) { showSidebar(); showingSocial = true; }
			setTimeout(function(){ $(window).resize(); }, 500);
			setTimeout(function(){
				if (!showingSocial) { showSidebar(); showingSocial = true; }
				}, 9000);
		}
      });
      
    function updateCursor() {
		var cursor = $('.typed-cursor');
		var amntLeft = -0.6*(extraSize-textCursor);
		var str = 'translate('+amntLeft+'em, 0px)';
		cursor.css('-webkit-transform', str);
		cursor.css('transform', str);
		cursor.css('-o-transform', str);
		cursor.css('-ms-transform', str);
		cursor.css('-moz-transform', str);
	}
 	 $(document).keypress(function(e) {
  		if (finishedTyping) {
  			var key = e.keyCode;
  			if (key <= 0) { key = e.charCode; }
			var elem = $(".element");
			var typedStr = String.fromCharCode(key);
			//if (shifting) {
			//	typedStr = typedStr.toUpperCase();
			//}
			if (key == 8 || (key >= 37 && key <= 40)) { //backspace or arrow keys
				return;
			} else if (key == 13) { //enter
				$('#textinput').text('');
				command = extra;
				beginning += extra + "\n";
				if (command.length > 0) {
					cmds.push(command);
					var myEval = evaluate(command);
					beginning += myEval + "\n";
					
					if (command == "clear") {
						beginning = '';
						extra = '';
						extraSize = 0;
					}
					
					historyCursor = cmds.length;
				}
				beginning += thePrompt;
				extra = '';
				extraSize = 0;
				textCursor = 0;
				updateCursor();
			} else {
				//console.log("Rec: "+typedStr+" (kc "+key+")");
				if (textCursor < extra.length) {
					extra = [extra.slice(0, textCursor), typedStr, extra.slice(textCursor)].join('');
				} else {
					extra = extra + typedStr;
				}
				extraSize += 1;
				textCursor ++;
			}
			var text = beginning + extra;
			
			while (beginning.indexOf("«") > -1) { // «TEXT TO HIGHLIGHT»
				var first = text.indexOf("«");
				var second = text.indexOf("»");
				var full = text.substring(first, second+1);
				var inside = full.substring(1, full.length-1);
				var replacement = "<span class='highlighted'>"+inside+"</span>";
				//var replacement = "<span style='background-color: #28FE14; color: black;'>"+inside+"</span>";
				text = text.replace(full, replacement);
				beginning = text;
				extra = '';
			}
			while (beginning.indexOf("‘") > -1) { // ‘TEXT TO CENTER‘
				var first = text.indexOf("‘");
				var second = text.indexOf("’");
				var full = text.substring(first, second+1);
				var inside = full.substring(1, full.length-1);
				//var replacement = "<div class='centered'>"+inside+"</div>";	
				// |_ this MUST be a span element
				// or it will separate existing span
				//and cause a text resizing bug
				//var replacement = "<div style='text-align: center;'>"+inside+"</div>";
				var replacement = "\t\t"+inside;
				text = text.replace(full, replacement);
				beginning = text;
				extra = '';
			}
			elem.html(text);
			scrollToBottom();
			
			if (!showingSocial && historyCursor > 1) {
				showingSocial = true;
				setTimeout(function(){
					showSidebar();
				}, 3000);
			}
		}
	});
	
	$(document).unbind('keydown').bind('keydown', function (event) {
		var doPrevent = false;
		if (event.keyCode === 8 || (event.keyCode >= 37 && event.keyCode <= 40)) {
			var d = event.srcElement || event.target;
			if ((d.tagName.toUpperCase() === 'INPUT' && 
				 (
					 d.type.toUpperCase() === 'TEXT' ||
					 d.type.toUpperCase() === 'PASSWORD' || 
					 d.type.toUpperCase() === 'FILE' || 
					 d.type.toUpperCase() === 'EMAIL' || 
					 d.type.toUpperCase() === 'SEARCH' || 
					 d.type.toUpperCase() === 'DATE' )
				 ) || d.tagName.toUpperCase() === 'TEXTAREA') {
				doPrevent = d.readOnly || d.disabled;
			}
			else {
				doPrevent = true;
			}
		}

		if (doPrevent) {
			event.preventDefault();
		}
	});
	
	$(document).keydown(function(e){
		if (finishedTyping) {
			var elem = $(".element");
			var typedStr = String.fromCharCode(e.keyCode);
			if (!shifting) {
				//typedStr = typedStr.toLowerCase();
			}
			if (e.keyCode == 8) { //backspace
				if (extraSize > 0 && textCursor > 0) {
					if (textCursor < extra.length) {
						extra = [extra.slice(0, textCursor-1), extra.slice(textCursor)].join('');
					} else {
						extra = extra.substring(0, extra.length-1);
					}
					var text = beginning + extra;
					elem.html(text);
					extraSize --;
					textCursor --;
				}
			} else if (e.keyCode == 38 || e.keyCode == 40) {
				if (e.keyCode == 38) { //up arrow
					historyCursor --;
				} else if (e.keyCode == 40) { //dn arrow
					historyCursor ++;
					if (historyCursor < cmds.length) {
						
						extra =	cmds[historyCursor];
						extraSize = extra.length;
					} else {
						
					}
				}
				if (historyCursor < 0) { historyCursor = 0; }
				if (historyCursor >= cmds.length) { 
					historyCursor = cmds.length;
					extra = '';
				} else {
					extra =	cmds[historyCursor];
				}
				extraSize = extra.length;
				textCursor = extraSize;
				elem.html(beginning+extra);
				updateCursor();
			} else if (e.keyCode == 37 || e.keyCode == 39) {
				 if (e.keyCode == 37) { //left arrow
				 	if (textCursor > 0) { textCursor --; }
				} else if (e.keyCode == 39) { //right arrow
					if (textCursor < extra.length) { textCursor ++; }
				}
				updateCursor();
			} else {
				if (android) { return $(document).keypress(e); }
				else { return; }
			}
			scrollToBottom();
		}
	});
	
	$(document).on('keyup keydown', function(e){shifting = e.shiftKey} );
	
	
});
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57280729-1', 'auto');
  ga('send', 'pageview');

</script>
<style type="text/css">
html, body {
  margin: 0;
}
html {
  background-color: #000000;
  padding: 10px 10px 30px 10px;
  color: #ccc;
  z-index: 0;
}
body {
	
}

.container {
	overflow-wrap: break-word;
	width: 80%;
	z-index:0;
}

.title_hero {
    color: #28FE14;
    font-family:"Bitstream Vera Sans Mono", "Andale Mono", "Lucida Console", Monaco, monospace;
    /*font-size: 1em;*/
    font-size: 16px;
}

#unfocused {
	color: white;
	-webkit-animation: none;
	-moz-animation: none;
	-ms-animation: none;
	-o-animation: none;
	animation: none;
}

#noblink {
	-webkit-animation: none;
	-moz-animation: none;
	-ms-animation: none;
	-o-animation: none;
	animation: none;
}

.typed-cursor {
	color: #28FE14;
	-webkit-animation: 1.3s blink step-end infinite;
	-moz-animation: 1.3s blink step-end infinite;
	-ms-animation: 1.3s blink step-end infinite;
	-o-animation: 1.3s blink step-end infinite;
	animation: 1.3s blink step-end infinite;
	position: absolute;
}

.highlighted {
	background-color: #28FE14;
	color: black;
}

#textinput {
	position: absolute;
	opacity: 0;
	width: 100%;
	height: 100%;
	margin: 0 auto;
	z-index: -99;
	left: 0px;
	right: 0px;
	top: 0px;
	bottom: 0px;
	display: none;
	font-size: 0px;
	color: #000;
}

#mobile_helper {
	position:absolute;
	opacity: 0.4;
	display: none;
	left: 0px;
	right: 0px;
	top: 0px;
	bottom: 0px;
	background-color: #DFDFDF;
	width: 100%;
	height: 100%;
	margin: 0 auto;
	text-align: center;
	font-size: 40px;
	font-family: 'Arial';
	color: #000000;
	
}
.va {
	position: relative;
	top: 50%;
	-webkit-transform: translateY(-50%);
	-moz-transform: translateY(-50%);
	-ms-transform: translateY(-50%);
	-o-transform: translateY(-50%);
	transform: translateY(-50%);
}
.centered {
	text-align: center;
}

#cmdList {
	/*height: auto;
	width: auto;*/
	padding: 10px;
	background-color:lightgray;
	opacity: 0.8;
	display: none;
	position: fixed;
	right: 0px;
	top: 0px;
	bottom: 0px;
	margin: 0px;
	border-left: 2px solid white;
	z-index: 0;
	color: blue;
}

#contactmenu_container {
	position: fixed;
	bottom: 0px;
	right: 0px;
	text-decoration: none;
	text-align: right;
	padding-left: 10px;
	padding-right: 10px;
	display: none;
	z-index: 999;
}

#contactmenu_container span {
	text-decoration: none;
	color: black;
	cursor: pointer;
}

#contactmenu_container span:hover {
	color: white;
}

@keyframes blink {
    from,to { opacity:0; }
    50% { opacity:1; }
}
@-webkit-keyframes blink{
    from,to { opacity:0; }
    50% { opacity:1; }
}
@-moz-keyframes blink{
    from,to { opacity:0; }
    50% { opacity:1; }
}
@-ms-keyframes blink{
    from,to { opacity:0; }
    50% { opacity:1; }
}
@-o-keyframes blink{
    from,to { opacity:0; }
    50% { opacity:1; }
}

.element {
	white-space:pre;
	line-height: 140%;
}
</style>
</head>
<body>
<div class="container">
	<input id="textinput" type="text" autocapitalize="off" autocorrect="off"></input>
	<span class="title_hero element"></span>
	<!--<span id="cursor" class="blink title_hero">▋</span>-->
</div>
<div id="cmdList" class="title_hero">
Try these commands:
<br />help
<br />about
<br />skills
<br />stuff
<br />resume
<br />contact -e
</div>
<div id="contactmenu_container" class="title_hero highlighted">
	<span id="fb-button" title="facebook">f</span>
	<span id="twitter-button" title="twitter">t</span>
	<span id="in-button" title="linkedin">in</span>
	<span id="gh-button" title="github">git</span>
	<span id="email-button" title="email">@</span>
</div>
<div id="mobile_helper" onclick="mobileShowKeyboard()"><span class="va">Click to show keyboard</span></div>
</body>
</html>
